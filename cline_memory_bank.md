projectbrief.md --> productContext.md  
projectbrief.md --> systemPatterns.md  
projectbrief.md --> techContext.md  
productContext.md --> activeContext.md  
systemPatterns.md --> activeContext.md  
techContext.md --> activeContext.md  
activeContext.md --> progress.md  
``` :contentReference[oaicite:2]{index=2}  
也就是说，`projectbrief.md` 是根源，“基础文档”；它导出／影响了三个文档（产品视角、系统架构、技术上下文）；这三个进一步汇聚进 `activeContext.md`（当前活动上下文）——最后 `activeContext.md` 再导出到 `progress.md`（项目进度追踪）。  
因此，这六个文档并非孤立，而是层层构建、关联，一起构成 “Memory Bank”（记忆仓库）系统。  

---

## 2. 每个文档的定位与作用

下面分别说明每个 `.md` 文件的定位、内容应包括哪些，以及在流程中的作用。

### 📝 `projectbrief.md`  
**定位**：项目简介／项目大纲，这是整个系统的 “真理源头（source of truth）”。 :contentReference[oaicite:3]{index=3}  
**作用**：定义项目的目的、目标、愿景、主要参与者、关键成功指标、原始假设等。它是后续其它文档的“起点”。  
**建议内容**：  
- 项目名称、背景、动机  
- 项目愿景、目标和关键成果（OKRs 或 KPI）  
- 项目范围／边界  
- 利益相关者／角色简介  
- 成功标准／里程碑  
**为什么重要**：任何智能体（Cline）在进入项目时，先读取这个文档，就能获得最基本、最高层的上下文，明确“我们在做什么、为什么、成功是什么”。  

---

### `productContext.md`  
**定位**：从 “产品／用户” 的视角来描述项目。  
**作用**：补充 `projectbrief.md` 中提到的愿景和目标，从用户需求、市场定位、价值主张、用户旅程、产品功能等角度展开。  
**建议内容**：  
- 用户是谁／角色设定（persona）  
- 用户痛点／需求  
- 产品价值主张（Value Proposition）  
- 核心功能／用例  
- 市场／竞争定位  
- 用户旅程／关键交互流程  
**流程中位置**：由 `projectbrief.md` 派生出来，是一条分支。智能体读取后，能明白“我们要为谁做、解决什么问题”。

---

### `systemPatterns.md`  
**定位**：系统架构与设计模式视角。  
**作用**：描述技术系统如何组织、关键架构决策、设计模式、模块划分、通信方式、接口协议、数据流、生命周期管理。  
**内容建议**：  
- 系统的高层架构图（比如微服务、事件驱动、数据流水线）  
- 模块划分与职责  
- 关键设计模式（如发布/订阅、CQRS、事件溯源）  
- 系统交互流程／组件关系  
- 性能、扩展、安全、可观察性等非功能性需求如何满足  
**流程位置**：也派生自 `projectbrief.md`；与 `techContext.md` 并列，聚焦于“架构”而非“具体技术工具”。

---

### `techContext.md`  
**定位**：从技术栈／开发环境层面描述。  
**作用**：明确项目采用的编程语言、框架、数据库、缓存、消息队列、部署方式、CI/CD流程、第三方服务等。  
**内容建议**：  
- 开发语言／运行时环境（如 Python3.11 + Trio）  
- 库／框架（如 Redis、Web 框架、ORM、消息队列）  
- 基础设施／部署（容器、Kubernetes、Serverless 等）  
- 开发流程（GitFlow、代码审查、自动化测试）  
- 环境配置／版本要求／安全策略  
**流程位置**：同样从 `projectbrief.md` 派生，聚焦“我们用什么技术来实现”。

---

### `activeContext.md`  
**定位**：“当前活动上下文”文档。  
**作用**：综合以上三个视角（产品、系统、技术）之后，描述“当前正在做什么”“现在项目处于什么状态”“当前有哪些关键事项／决定”等。它是智能体在每次会话前读取的核心，确保理解最新状态。  
**内容建议**：  
- 当前迭代／里程碑／Sprint 状态  
- 当前任务／阻塞／风险  
- 最近重大架构决策／变更  
- 当前环境状态（版本、部署、Bug 状况）  
- 待办事项／下一个目标  
**流程位置**：由 `productContext.md`、`systemPatterns.md`、`techContext.md` 三者汇聚生成。即这三个文档是 “输入”，`activeContext.md` 是 “当前上下文”。  

---

### `progress.md`  
**定位**：项目进度追踪文档。  
**作用**：记录项目历程、里程碑情况、完成情况、指标完成度、回顾、教训等。它是智能体能够“回忆起”项目发展轨迹的重要存档。  
**内容建议**：  
- 已完成／未完成的里程碑／任务  
- 时间线／甘特图概要  
- 关键决策变更的历史记录  
- 指标（如用户增长、性能提升）  
- 回顾与教训（What went well, What didn’t）  
**流程位置**：由 `activeContext.md` 推导出来，即当当前活动上下文确认以后，会更新进度文档。流程图中 `activeContext.md --> progress.md`。  

---

## 3. 为什么要这么做／优势  
- **避免上下文窗口限制**：文章提到，AI 模型的 “上下文窗口（context window）” 是有限的，当聊天／会话变长时，之前的内容可能被丢弃。 :contentReference[oaicite:6]{index=6}  
- **可恢复的项目记忆**：这些 `.md` 文档就像 “他醒来后查看照片” 的侦探，能够快速恢复项目上下文。  
- **结构化而非自由散乱**：使用流程图（Mermaid） + 文档结构，让智能体更容易遵循、也更容易自动化管理。 :contentReference[oaicite:7]{index=7}  
- **清晰责任与演进路径**：不同文档切分不同维度（产品／系统／技术／当前／进度），让智能体／团队清楚每个维度的内容在哪里。  
- **自动化／规范化**：当启动新项目或新会话时，智能体可检测这些文件是否存在，不存在就创建，存在就阅读。 :contentReference[oaicite:8]{index=8}  

---

## 4. 如何在实际中使用这六个文件  
以下是一个推荐的 **使用流程**：

1. **项目启动时**  
   - 在项目根目录创建 `memory-bank/` 目录。 :contentReference[oaicite:9]{index=9}  
   - 创建 `projectbrief.md`，作为根文档，填写项目愿景、目标等。  
   - 创建 `productContext.md`、`systemPatterns.md`、`techContext.md` 的初稿。  
   - 创建 `activeContext.md`（可先空或填写“尚未开始”状态）。  
   - 创建 `progress.md`（初为零开始）。  

2. **每次启动一个新的智能体会话／开发会话前**  
   - 智能体（Cline）先读取 `memory-bank/` 中的这六个文档。  
   - 如果某文件缺失，自动创建并提示你填充。  
   - 验证上下文是否完整（各文档是否一致、有无冲突／缺失）。  

3. **开发过程中**  
   - 在工作之前，确保你已阅读这些文档，以对齐上下文。  
   - 当做出关键决策（如架构改变、功能变更）时，更新 `systemPatterns.md` 或 `techContext.md`。  
   - 在当前任务执行／迭代中，每次状态变更时更新 `activeContext.md`。  
   - 在达到里程碑或阶段完成后，更新 `progress.md`，记录完成情况与回顾。  

4. **会话／上下文被重置时**（如关闭聊天、模型上下文窗口满）  
   - 智能体可从这些 `.md` 文档重新加载全部关键上下文，而无需手动重新说明。  
   - 这样实现 “永不忘记” 的效果：即便上下文窗口被清空，只要这些文档在，智能体可“恢复记忆”。  

---

如果你愿意，我可以帮你 **为这六个 `.md` 文件生成一个模版**（每个文件包括头部、结构、示例内容）——这样你可以直接拿来使用。你要不要？
::contentReference[oaicite:10]{index=10}
